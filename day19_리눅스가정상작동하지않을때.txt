day19

싱글 부트
- 여러 사용자가 아닌, 단일 사용자가 컴퓨터를 이용하는 모드
- 단일 사용자이므로 사용자 인증 과정이 없다
- 비밀번호 없이 root 계정으로 로그인 된다
- init 1 을 이용할 수도 있으나, 부팅이 안되면 이용 불가
- 따라서, 부팅에 관여하는 grub 메뉴에 진입하여 사용 가능
- kernel 명령어의 인자에 single을 추가하면 된다

------------------------------------------------

싱글 부트는 아무나 접근 가능하면 보안상 위험하다
따라서, grub 에 비밀번호를 설정하여 보안을 올린다
- grub-crypt 명령을 이용하면 hash값을 생성할 수 있다
- /boot/grub/grub.conf 내부에 다음과 같이 작성한다
password --encrypted [해쉬값]

이렇게 작성하면 부팅 후 5초 이내에 grub에 접근해도
grub의 비밀번호를 알아야 부팅 옵션을 변경할 수 있다

------------------------------------------------

/etc/grub.conf는 링크파일이고
/boot/grub/grub.conf 를 가리키고 있다
만약 대상의 이름이 변경되거나 내용이 손상되면
정상적으로 부팅할 수 없고
직접 grub에 명령어를 입력하여 부팅할 수 있다

grub> root (hd0,0)

grub> kernel /vmlinuz... root=[최상위에 마운트되는 장치이름]

grub> initrd /initramfs...

grub> boot

평소에 최상위 디렉토리에 마운트되는 장치를 알고 있어야 한다

------------------------------------------------

grub 에 명령을 직접 입력해도 부팅할 수 없는 경우는
cdrom을 이용하여 rescue 모드로 부팅할 수 있다

펌웨어에서 cdrom 으로 우선 부팅하도록 설정하고
부팅하면 설치메뉴에 진입한다
설치메뉴에서 3번째 위치한 rescue 모드로 부팅

언어 및 키보드 선택, 네트워크 설정 안함
본래 하드디스크를 /mnt/sysimage 아래에 마운트한다
continue -> ok -> ok -> get shell

bash~4.1# chroot /mnt/sysimage

위 명령을 입력하면 기존에 사용하던 환경대로 불러올 수 있다
복구가 필요하면 복구하거나, 자료를 백업할 수도 있다

